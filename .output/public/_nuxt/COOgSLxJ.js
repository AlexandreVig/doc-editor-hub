import{g as U,o as n,k as h,w as l,b as o,a as e,q as D,av as N,aw as O,ay as E,az as S,h as I,c as a,t as B,m as j,I as $,J as C,aC as L,y as F,z as T,aB as V,_ as q,F as G,i as M,O as H,l as v,d as A}from"./BDinhLvt.js";import{_ as J,a as Y}from"./ByuPdV8N.js";const K=e("h1",null,"Are you sure you want to delete this file?",-1),P={class:"flex justify-end gap-4"},Q=U({__name:"deleteConfirmationModal",emits:["delete","cancel"],setup(m,{emit:d}){const i=d;function r(){i("delete")}function c(){i("cancel")}return(u,p)=>{const s=D,x=N,f=O;return n(),h(f,{ui:{width:"w-full max-w-fit sm:max-w-fit"},"prevent-close":""},{default:l(()=>[o(x,null,{header:l(()=>[K]),default:l(()=>[e("div",P,[o(s,{size:"xl",color:"primary",variant:"soft",label:"Cancel",onClick:c}),o(s,{size:"xl",color:"primary",variant:"solid",label:"Delete",onClick:r})])]),_:1})]),_:1})}}}),R={class:"p-4 rounded-lg shadow-lg bg-slate-200 h-fit"},W={class:"flex flex-col"},X=e("span",null,"Last modified:",-1),Z={key:0,class:"flex justify-between mt-2"},ee=e("span",null,"Shared by:",-1),te={key:1,class:"flex justify-between mt-2"},oe=e("span",null,"Shared with:",-1),ne={class:"flex justify-around mt-4"},se=U({__name:"docCard",props:{document:{},showOwner:{type:Boolean}},emits:["update"],setup(m,{emit:d}){const i=m,r=d,c=E(),u=S(),p=I(),s=t=>L.sha256(t),x=()=>{var t;(t=window.open(`/document/edit/${i.document._id}`,"_blank"))==null||t.focus()},f=()=>{c.open(Q,{onDelete(){p.delete(`/api/documents/${i.document._id}`).then(()=>{u.add({title:"The file has been deleted",id:"modal-success",color:"green"})}).catch(t=>{console.error(t),u.add({title:"An error occurred",id:"modal-failure"})}).finally(()=>{c.close(),r("update")})},onCancel(){c.close()}})};return(t,b)=>{const y=F,g=T,w=V,_=J,z=D;return n(),a("div",R,[e("p",null,B(t.document.title),1),o(y,{name:"i-heroicons-document",class:"text-5xl w-full text-center"}),e("div",W,[X,e("span",null,B(t.document.timestamps.updatedAt),1)]),t.document.collaborators.length>0?(n(),a("div",Z,[ee,o(_,{size:"xs",max:4},{default:l(()=>[o(w,{class:"rounded-full",text:t.document.ownerId.name},{default:l(()=>[o(g,{src:`https://www.gravatar.com/avatar/${s(t.document.ownerId.email)}?d=retro`,alt:t.document.ownerId.name},null,8,["src","alt"])]),_:1},8,["text"])]),_:1})])):j("",!0),t.document.collaborators.length>0?(n(),a("div",te,[oe,o(_,{size:"xs",max:4},{default:l(()=>[(n(!0),a($,null,C(t.document.collaborators,k=>(n(),h(w,{class:"rounded-full",text:k.name},{default:l(()=>[o(g,{src:`https://www.gravatar.com/avatar/${s(k.email)}?d=retro`,alt:k.name},null,8,["src","alt"])]),_:2},1032,["text"]))),256))]),_:1})])):j("",!0),e("div",ne,[o(z,{onClick:x,icon:"i-heroicons-pencil-square",size:"sm",color:"green",variant:"solid",label:"Edit",trailing:!1}),o(z,{onClick:f,icon:"i-heroicons-trash",size:"sm",color:"red",variant:"solid",trailing:!1})])])}}}),ae={},le={class:"relative overflow-hidden rounded border border-dashed border-gray-400 dark:border-gray-500 opacity-75 px-4 flex items-center justify-center h-96 select-none w-full"},ce=e("svg",{class:"absolute inset-0 h-full w-full stroke-gray-900/10 dark:stroke-white/10",fill:"none"},[e("defs",null,[e("pattern",{id:"pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse"},[e("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})])]),e("rect",{stroke:"none",fill:"url(#pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e)",width:"100%",height:"100%"})],-1);function de(m,d){return n(),a("div",le,[ce,G(m.$slots,"default")])}const ie=q(ae,[["render",de]]),re={class:"flex justify-between"},ue={class:"flex items-center"},_e={class:"flex items-center justify-center w-12 h-12 rounded-full bg-slate-200"},me=e("div",{class:"-mt-6 ml-4"},[e("p",{class:"w-full text-slate-400"},"List"),e("h1",{class:"font-bold text-2xl leading-5"},"Documents")],-1),pe={class:"w-full"},fe=e("h1",{class:"text-2xl"},"My documents",-1),he={key:0,class:"grid grid-cols-6 gap-6 my-6"},xe={key:1,class:"my-6"},ye={class:"grid grid-rows-2 text-center z-50"},ge=e("h1",{class:"text-2xl mb-4"},"Shared documents",-1),we={key:2,class:"grid grid-cols-6 gap-6 my-6"},ve={key:3,class:"my-6"},$e=U({__name:"index",setup(m){const d=I(),i=S(),r=M([]),c=M([]);H(()=>{d.setNavbar(!0),u()});const u=()=>{d.get("/api/documents").then(s=>{r.value=s.data.ownedDocuments,c.value=s.data.sharedDocuments})},p=()=>{d.post("/api/documents",{title:"New document",content:"<p></p>"}).then(()=>{i.add({title:"A new file has been created",id:"modal-success",color:"green"})}).catch(s=>{console.error(s),i.add({title:"An error occurred",id:"modal-failure"})}).finally(()=>{u()})};return(s,x)=>{const f=F,t=se,b=D,y=ie,g=Y,w=N;return n(),h(w,{ui:{base:"w-full h-fit",ring:"",divide:"divide-y divide-gray-200 dark:divide-gray-700",header:{padding:"px-4 py-10"},body:{padding:"",base:"h-full px-24 p-4 divide-y divide-gray-200 dark:divide-gray-700 flex justify-center"},footer:{padding:"p-4"}}},{header:l(()=>[e("div",re,[e("div",ue,[e("div",_e,[o(f,{name:"i-heroicons-document",class:"text-2xl"})]),me])])]),default:l(()=>[e("div",pe,[fe,v(r).length>0?(n(),a("div",he,[(n(!0),a($,null,C(v(r),_=>(n(),h(t,{document:_,showOwner:!1,onUpdate:u},null,8,["document"]))),256)),o(b,{onClick:p,class:"w-fit h-fit m-auto",icon:"i-heroicons-plus-16-solid",size:"sm",color:"primary",variant:"solid",label:"Create document",trailing:""})])):(n(),a("div",xe,[o(y,null,{default:l(()=>[e("div",ye,[A(" You don't have any file "),o(b,{onClick:p,class:"w-fit mx-auto",icon:"i-heroicons-plus-16-solid",size:"sm",color:"primary",variant:"solid",label:"Create document",trailing:""})])]),_:1})])),o(g,{class:"my-8"}),ge,v(c).length>0?(n(),a("div",we,[(n(!0),a($,null,C(v(c),_=>(n(),h(t,{document:_,showOwner:!0},null,8,["document"]))),256))])):(n(),a("div",ve,[o(y,null,{default:l(()=>[A("Nobody shared you documents")]),_:1})]))])]),_:1})}}});export{$e as default};
